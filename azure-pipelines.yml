# HTML

# Archive your static HTML project and save it with the build record.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

trigger:
- master

stages:
- stage: 'build'
  displayName: 'Build the web application'
  jobs: 
  - job: 'Build'
    displayName: 'Build job'
    pool:
      vmImage: 'ubuntu-latest'
      demands:
      - npm

    steps:
    - task: ArchiveFiles@2
      inputs:
       rootFolderOrFile: '$(build.sourcesDirectory)'
       includeRootFolder: false

    - task: PublishBuildArtifacts@1

    - task: DownloadPipelineArtifact@2
      inputs:
         buildType: 'specific'
         project: '849bc94d-c13c-463a-bf19-b9e12397d667'
         definition: '2'
         specificBuildWithTriggering: true
         buildVersionToDownload: 'latest'
         targetPath: '$(Pipeline.Workspace)'
    
    
- stage: 'release'
  displayName: 'Release the web application'
  jobs: 
  - job: 'release'
    displayName: 'Release job'

    steps:
    - task: AzureRmWebAppDeployment@4
      inputs:
        ConnectionType: 'AzureRM'
        azureSubscription: 'Service Connection - Eindopdracht'
        appType: 'webApp'
        WebAppName: 'htmlopdracht-2233'
        packageForLinux: '$(System.DefaultWorkingDirectory)/**/*.zip'
